<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Secret Rant Maker</title>
<style>
  body { font-family: Arial, sans-serif; background: #111; color: #eee; display: flex; flex-direction: column; align-items: center; padding: 2rem; }
  h1 { color: #0f0; }
  input, textarea { display: block; width: 300px; margin: 0.5rem 0; padding: 0.5rem; border-radius: 5px; border: 1px solid #444; background: #222; color: #fff; }
  button { padding: 0.5rem 1rem; border: none; border-radius: 5px; background: #0f0; color: #000; font-weight: bold; cursor: pointer; margin-top: 0.5rem; }
  button:disabled { background: #555; color: #ccc; cursor: not-allowed; }
  .message { margin-top: 1rem; color: #ff0; }
</style>
</head>
<body>

<input type="password" id="secret" placeholder="Enter secret key">

<textarea id="rantText" rows="4" placeholder="If you arent me and see this, your GAY!"></textarea>

<button id="submitRant">Add Rant</button>

<div class="message" id="message"></div>

<script>
  const submitBtn = document.getElementById("submitRant");
  const secretInput = document.getElementById("secret");
  const rantInput = document.getElementById("rantText");
  const messageEl = document.getElementById("message");

  submitBtn.addEventListener("click", async () => {
    const secret = secretInput.value.trim();
    const text = rantInput.value.trim();

    if (!secret || !text) {
      return;
    }

    submitBtn.disabled = true;
    messageEl.textContent = "Posting rant...";

    try {
      const res = await fetch("/api/rants", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ secret, text })
      });

      const data = await res.json();

      if (res.ok && data.success) {
        rantInput.value = "";
      } else {
      }
    } catch (err) {
      console.error(err);
    }

    submitBtn.disabled = false;
  });
</script>
</body>
</html>